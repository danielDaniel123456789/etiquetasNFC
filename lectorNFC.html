<!DOCTYPE html>
<html>
<head>
    <title>Lector NFC y Redirección a Google Maps</title>
</head>
<body>
    <h1>Lector NFC y Redirección a Google Maps</h1>
    <button id="scanButton">Escanear NFC</button>
    <p id="output"></p>

    <script>
        const scanButton = document.getElementById('scanButton');
        const output = document.getElementById('output');

        scanButton.addEventListener('click', async () => {
            try {
                const reader = new NDEFReader();
                await reader.scan();
                output.textContent = "Escaneando NFC...";

                reader.onreading = async event => {
                    // Obtener la ubicación en tiempo real
                    const position = await getLocation();
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    output.textContent = `Ubicación obtenida: Latitud ${latitude}, Longitud ${longitude}`;

                    // Redireccionar a Google Maps con la ubicación
                    const googleMapsUrl = `https://www.google.com/maps?q=${latitude},${longitude}`;
                    window.location.href = googleMapsUrl; // Redirecciona a Google Maps
                };
            } catch (error) {
                output.textContent = `Error: ${error.message}`;
            }
        });

        function getLocation() {
            return new Promise((resolve, reject) => {
                if (!navigator.geolocation) {
                    reject(new Error("Geolocalización no soportada por este navegador."));
                } else {
                    navigator.geolocation.getCurrentPosition(resolve, reject);
                }
            });
        }
    </script>
</body>
</html>